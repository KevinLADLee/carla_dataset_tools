# Carla Dataset Tools

Data collection tools for CARLA Simulator.

All raw data generated by this tool is in **right-hand coordinate**.

This work is part of the CarlaFLCAV project. Feel free to give us a star -> [**CarlaFLCAV**](https://github.com/SIAT-INVS/CarlaFLCAV)

## Setup

```
pip3 install -r requirements.txt

# Write following env into your bashrc or zshrc
export CARLA_ROOT=[PATH_TO_YOUR_CARLA]
export PYTHONPATH=$PYTHONPATH:$CARLA_ROOT/PythonAPI/carla/dist/[YOUR_CARLA_EGG_NAME]:$CARLA_ROOT/PythonAPI/carla/

```

## QuickStart

### Data Recording
```
python3 data_recorder.py
```

All config files are under config folder.

### Data Labeling

#### KITTI Object

```
python label_tools/kitti_objects_label.py -r record_2022_0119_1303
```

### Visualization

For npy pointcloud rawdata, use util/visualize_lidar.py to visualize
```bash
# File mode
python3 utils/visualize_lidar.py --type [lidar / semantic_lidar / radar] --source raw_data/record_[date]/[uid]_[vehicle_type]/[uid]_[sensor_type].npy
# Glob mode
python3 utils/visualize_lidar.py --type [lidar / semantic_lidar / radar] --source raw_data/record_[date]/[uid]_[vehicle_type]/[uid]_[sensor_type]
```

## TODO

- [x] Data recorder tool
- [ ] Data labeling tool for KITTI format (object)
- [ ] Documentation and Comments

## Acknowledgement

* [CARLA Ros Bridge](https://github.com/carla-simulator/ros-bridge)
* [CARLA_INVS](https://github.com/zijianzhang/CARLA_INVS)

## Citation

```latex
@article{FLCAV,
  title={Federated learning meets connected autonomous vehicle perception: Principles and implementation},
  author={Shuai Wang and Chengyang Li and Qi Hao and Derrick Wing Kwan Ng and Yonina C. Eldar and H. Vincent Poor},
  journal={submitted to IEEE for possible publication},
  year={2021},
  publisher={IEEE}
}
```

